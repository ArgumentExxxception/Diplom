@page "/create-table"
@using Core.Enums
@inject ISnackbar Snackbar

<MudContainer>
    <MudText Typo="Typo.h4" Class="mb-4">Создание новой таблицы</MudText>
    
    <MudTextField @bind-Value="_tableName" Label="Название таблицы" Variant="Variant.Outlined" Class="mb-4" />
    
    <MudPaper Elevation="25" Class="pa-4 mb-4">
        <MudText Typo="Typo.h6" Class="mb-3">Добавить колонку</MudText>

        <MudItem xs="12" sm="6">
            <MudTextField @bind-Value="_newColumnName" Label="Название колонки" Variant="Variant.Outlined" />
        </MudItem>

        <MudItem xs="12" sm="6">
            <MudSelect T="int" @bind-Value="_newColumnType" Label="Тип данных" Variant="Variant.Outlined">
                <MudSelectItem T="int" Value="0">Текст</MudSelectItem>
                <MudSelectItem T="int" Value="1">Число</MudSelectItem>
                <MudSelectItem T="int" Value="2">Дата</MudSelectItem>
                <MudSelectItem T="int" Value="3">Логическое значение</MudSelectItem>
            </MudSelect>
        </MudItem>

        <MudItem xs="12" sm="6">
            <MudCheckBox T="bool" @bind-Checked="_newColumnIsPrimaryKey" Label="Первичный ключ" />
        </MudItem>

        <MudItem xs="12" sm="6">
            <MudCheckBox T="bool" @bind-Checked="_newColumnIsRequired" Label="Обязательное поле" />
        </MudItem>
        
        <MudButton OnClick="AddColumn" Color="Color.Primary" Class="mt-3">Добавить колонку</MudButton>
    </MudPaper>
    
    <MudText Typo="Typo.h6" Class="mb-3">Предварительный просмотр колонок</MudText>
    <MudTable Items="columns" Hover="true" Striped="true">
        <HeaderContent>
            <MudTh>Название колонки</MudTh>
            <MudTh>Тип данных</MudTh>
            <MudTh>Первичный ключ</MudTh>
            <MudTh>Обязательное поле</MudTh>
            <MudTh>Действия</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd>@context.Name</MudTd>
            <MudTd>@context.Type</MudTd>
            <MudTd>@context.IsPrimaryKey</MudTd>
            <MudTd>@context.IsRequired</MudTd>
            <MudTd>
                <MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="() => RemoveColumn(context)" Color="Color.Error" Size="Size.Small" />
            </MudTd>
        </RowTemplate>
    </MudTable>
    
    <MudButton OnClick="CreateTable" Color="Color.Success" Class="mt-4">Создать таблицу</MudButton>
</MudContainer>